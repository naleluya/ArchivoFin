<div class="pt-16 border-bottom bd-default bg-light">    <div class="container-fluid">        <div class="row">            <div class="cell-md-6 text-center-md text-left pt-2">                <h3 class="display1">DIRECCION DE TESORO MUNICIPAL</h3>                <button class="button primary rounded drop-shadow" onclick="Metro.dialog.open('#demoDialog1')" id="add_dtm"><span                        class="mif-note-add mif-lg"></span>Adicionar DTM                </button>                <button class="button alert square rounded drop-shadow" id="reload"><span class="mif-loop2 mif-lg"></span></button>            </div>        </div>    </div>    <div style="overflow-x: scroll;">        <div class="container-fluid pt-0 pl-0 pr-0 pl-5-md pr-5-md">            <table class="table row-border row-hover compact" id="tableDTM">                <thead>                <tr>                    <th class="sortable-column sort-asc">DTM<br>Gestion</th>                    <th class="sortable-column sort-asc" style="width: 10%;">Nro. Correlativo/<br>Nº Fojas</th>                    <th class="sortable-column sort-asc" style="width: 10%;"><span class="contenido">Beneficiario</span></th>                    <th class="sortable-column sort-asc" style="width: 25%;">Descripcion</th>                    <th class="sortable-column sort-asc">Ubicacion</th>                    <th class="sortable-column sort-asc">CUCE</th>                    <th class="sortable-column sort-asc" style="width: 8%;">SISIN</th>                    <th style="width: 5%;">Archivo</th>                    <th style="width: 8%;">Accion</th>                </tr>                </thead>                <tbody style="font-size: 13px;">                </tbody>            </table>        </div>    </div>    <div style="text-align: center;"><span style="text-shadow: 1px 1px 1px #3f4448; color: #ff9317; font-size: 18px;">&#174;</span>                                    <span style="text-shadow: 1px 1px 1px #3f4448; color: #ff9317;">G.A.M.E.A. 2018</span>    </div></div><!--modal Dialog INSERT DTM--><div data-role="dialog" id="demoDialog1" style="background-color: #f4eeb2" data-width="800">    <div class="dialog-title" style="font-weight:900;">ADICIONAR DTM</div>    <div class="dialog-content">        <form data-role="validator" method="post" action="<?php echo site_url('Reg_control/save_dtm')?>">            <div class="row mb-4">                <div class="cell-md-3">                    <label>Fecha</label>                    <input name="dtm_fecha_ingreso" data-role="datepicker" data-locale="es-ES">                </div>                <div class="cell-md-3">                    <label>DTM</label>                    <input name="dtm_nro" type="number" data-validate="required number">                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Ingresar DTM                    </span>                </div>                <div class="cell-md-2">                    <label>Gestion</label>                    <select  name="dtm_gestion" data-role="select" data-validate="required">                        <option></option>                        <option value="2015">2015</option>                        <option value="2016">2016</option>                        <option value="2017">2017</option>                        <option value="2018">2018</option>                        <option value="2019">2019</option>                        <option value="2020">2020</option>                    </select>                    <span class="invalid_feedback">                      Seleccione Gestion                    </span>                </div>                <div class="cell-md-2">                    <label>Nº Correlativo</label>                    <input name="dtm_nro_correlativo" type="number" data-validate="required number">                    <span class="invalid_feedback">                      <span class="mif-warning"></span>Introduzca Nº Correlativo                    </span>                </div>                <div class="cell-md-2">                    <label>Nº Fojas</label>                    <input name="dtm_nro_fojas" type="number">                </div>            </div>            <div class="row mb-2">                <div class="cell-md-6">                    <label>Beneficiario</label>                    <input class="text-upper" name="dtm_beneficiario" type="text" data-validate="required">                     <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Beneficiario                    </span>                </div>                <div class="cell-md-6">                    <label>Descripcion</label>                    <textarea class="text-upper" name="dtm_descripcion" data-validate="required"></textarea>                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Descripcion                    </span>                </div>            </div>            <div class="row mb-5">                <div class="cell-md-3">                    <label>Nº Contrato</label>                    <input class="text-upper" name="dtm_nro_con" type="text" >                </div>                <div class="cell-md-3">                    <label>Monto Economico</label>                    <input name="dtm_monto" id="dtm_monto" type="text" data-validate="required number" placeholder="0.00">                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Monto Economico                    </span>                </div>                <div class="cell-md-2">                    <label>Estante</label>                    <input class="text-upper" name="dtm_estante" type="text" required>                </div>                <div class="cell-md-2">                    <label>Balda</label>                    <select name="dtm_balda" data-role="select">                        <option value=""></option>                        <option value="A">A</option>                        <option value="B">B</option>                        <option value="C">C</option>                        <option value="D">D</option>                        <option value="E">E</option>                        <option value="F">F</option>                    </select>                    <div class="invalid_feedback">Please provide a valid zip.</div>                </div>                <div class="cell-md-2">                    <label>Fila</label>                    <select name="dtm_fila" data-role="select">                        <option value=""></option>                        <option value="1">1</option>                        <option value="2">2</option>                        <option value="3">3</option>                        <option value="4">4</option>                        <option value="5">5</option>                        <option value="6">6</option>                    </select>                    <div class="invalid_feedback">Please provide a valid zip.</div>                </div>            </div>            <div class="row mb-3">                <div class="cell-md-3">                    <label>ORDEN DE</label>                    <select name="dtm_orden_tipo" data-role="select">                        <option></option>                        <option value="COMPRA">COMPRA</option>                        <option value="SERVICIO">SERVICIO</option>                    </select>                </div>                <div class="cell-md-6">                    <label>CITE/NRO</label>                    <input class="text-upper" name="dtm_orden_cite" type="text">                     <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca CITE/NRO                    </span>                </div>                <div class="cell-md-3">                    <label>Nº Cheque</label>                    <input name="dtm_nro_cheque" type="number">                </div>            </div>            <div class="row mb-2">                <div class="cell-md-6">                    <label>SISIN</label>                    <input class="text-upper" name="dtm_sisin" type="text">                </div>                <div class="cell-md-6">                    <label>CUCE</label>                    <input class="text-upper" name="dtm_cuce" type="text">                </div>            </div>            <div class="row mb-3">                <div class="cell-md-4">                    <label>Objeto de Gasto</label>                    <input class="text-upper" name="dtm_obj_gasto" type="text">                </div>                <div class="cell-md-4">                    <label>BD</label>                    <input name="dtm_bd" type="number">                </div>                <div class="cell-md-4">                    <label>Partida Presupuestaria</label>                    <input name="dtm_partida_pre" type="number">                </div>            </div>    </div>    <div class="dialog-actions">        <button type="submit" class="button primary rounded drop-shadow">Aceptar</button>        </form>        <button class="button secondary js-dialog-close rounded drop-shadow">Cancelar</button>    </div></div><!--modal Dialog EDIT DTM--><div data-role="dialog" id="demoEdit" style="background-color: #f4eeb2" data-width="800">    <div class="dialog-title" style="font-weight:900;">ACTUALIZAR DTM</div>    <div class="dialog-content">        <form data-role="validator" method="post" action="<?php echo site_url('Reg_control/edit_dtm')?>">            <input type="hidden" name="dtm_id">            <div class="row mb-4">                <div class="cell-md-3">                    <label>Fecha</label>                    <input name="e_dtm_fecha_ingreso" data-role="datepicker" data-locale="es-ES" data-value="" id="e_dtm_fecha_ingreso">                </div>                <div class="cell-md-3">                    <label>DTM</label>                    <input name="e_dtm_nro" type="number" data-validate="required number">                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Ingresar DTM                    </span>                </div>                <div class="cell-md-2">                    <label>Gestion</label>                    <select  name="e_dtm_gestion"  data-validate="required">                        <option></option>                        <option value="2015">2015</option>                        <option value="2016">2016</option>                        <option value="2017">2017</option>                        <option value="2018">2018</option>                        <option value="2019">2019</option>                        <option value="2020">2020</option>                    </select>                    <span class="invalid_feedback">                      Seleccione Gestion                    </span>                </div>                <div class="cell-md-2">                    <label>Nº Correlativo</label>                    <input name="e_dtm_nro_correlativo" type="number" data-validate="required number">                    <span class="invalid_feedback">                      <span class="mif-warning"></span>Introduzca Nº Correlativo                    </span>                </div>                <div class="cell-md-2">                    <label>Nº Fojas</label>                    <input name="e_dtm_nro_fojas" type="number">                </div>            </div>            <div class="row mb-2">                <div class="cell-md-6">                    <label>Beneficiario</label>                    <input class="text-upper" name="e_dtm_beneficiario" type="text" data-validate="required">                     <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Beneficiario                    </span>                </div>                <div class="cell-md-6">                    <label>Descripcion</label>                    <textarea class="text-upper" name="e_dtm_descripcion" data-validate="required"></textarea>                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Descripcion                    </span>                </div>            </div>            <div class="row mb-5">                <div class="cell-md-3">                    <label>Nº Contrato</label>                    <input class="text-upper" name="e_dtm_nro_con" type="text">                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Nº Contrato                    </span>                </div>                <div class="cell-md-3">                    <label>Monto Economico</label>                    <input name="e_dtm_monto" type="text" data-validate="required number" id="e_dtm_monto">                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca Monto Economico                    </span>                </div>                <div class="cell-md-2">                    <label>Estante</label>                    <input class="text-upper" name="e_dtm_estante" type="text" required>                </div>                <div class="cell-md-2">                    <label>Balda</label>                    <select name="e_dtm_balda">                        <option value="PENDIENTE"></option>                        <option value="A">A</option>                        <option value="B">B</option>                        <option value="C">C</option>                        <option value="D">D</option>                        <option value="E">E</option>                        <option value="F">F</option>                    </select>                    <div class="invalid_feedback">Please provide a valid zip.</div>                </div>                <div class="cell-md-2">                    <label>Fila</label>                    <select name="e_dtm_fila">                        <option value="PENDIENTE"></option>                        <option value="1">1</option>                        <option value="2">2</option>                        <option value="3">3</option>                        <option value="4">4</option>                        <option value="5">5</option>                        <option value="6">6</option>                    </select>                    <div class="invalid_feedback">Please provide a valid zip.</div>                </div>            </div>            <div class="row mb-3">                <div class="cell-md-3">                    <label>ORDEN DE</label>                    <select name="e_dtm_orden_tipo">                        <option></option>                        <option value="COMPRA">COMPRA</option>                        <option value="SERVICIO">SERVICIO</option>                    </select>                    <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca ORDEN DE                    </span>                </div>                <div class="cell-md-6">                    <label>CITE/NRO</label>                    <input class="text-upper" name="e_dtm_orden_cite" type="text">                     <span class="invalid_feedback">                        <span class="mif-warning"></span>Introduzca CITE/NRO                    </span>                </div>                <div class="cell-md-3">                    <label>Nº Cheque</label>                    <input name="e_dtm_nro_cheque" type="number">                </div>            </div>            <div class="row mb-2">                <div class="cell-md-6">                    <label>SISIN</label>                    <input class="text-upper" name="e_dtm_sisin" type="text">                </div>                <div class="cell-md-6">                    <label>CUCE</label>                    <input class="text-upper" name="e_dtm_cuce" type="text">                </div>            </div>            <div class="row mb-3">                <div class="cell-md-4">                    <label>Objeto de Gasto</label>                    <input class="text-upper" name="e_dtm_obj_gasto" type="text">                </div>                <div class="cell-md-4">                    <label>BD</label>                    <input name="e_dtm_bd" type="number">                </div>                <div class="cell-md-4">                    <label>Partida Presupuestaria</label>                    <input name="e_dtm_partida_pre" type="number">                </div>            </div>    </div>    <div class="dialog-actions">        <button type="submit" class="button primary rounded drop-shadow">Aceptar</button>        </form>        <button class="button secondary js-dialog-close rounded drop-shadow">Cancelar</button>    </div></div><!--modal Dialog UPLOAD DTM--><div data-role="dialog" id="demoUp" style="background-color: #f4eeb2" data-width="500">    <div class="dialog-title" style="font-weight:900;">SUBIR ARCHIVO</div>    <div class="dialog-content">        <form  id="upload" method="post" enctype="multipart/form-data" action="<?php echo site_url("Reg_control/upload_DTM");?>">            <!--El name del campo tiene que ser si o si "userfile"-->            <div class="row mb-2">                <div class="cell-md-9">                    <input type="file" data-role="file" name="dtm_file" id="dtm_file" data-validate="required" data-caption="<span class='mif-folder'></span>">                    <input type="hidden" name="nFile" id="nFile">                    <input type="hidden" name="dtm_id">                </div>                <div class="cell-md-3">                    <button type="submit" class="button primary rounded drop-shadow">Enviar Arch.</button>                </div>        </form>        <progress id="prog" max="100" value="0" style="display: none;">        </progress>        <div id="percent" style="font-weight:bold;"></div>    </div>    <div class="dialog-actions">        <button class="button alert js-dialog-close rounded drop-shadow">Cerrar</button>    </div></div></body><style type="text/css">    label{ font-size: 10px; font-weight:900;}    #tableDTM_filter{padding-left: 2%;    padding-right: 2%;}    #tableDTM_length {padding-left: 2%;        padding-right: 2%;}    #prog {        background-color :  #1a1a1a ;        height :  25px ;        padding :  5px ;        width :  350px ;        margin : 5px 11px;        border-radius :  5px ;        box-shadow :  0  1px  5px  #000  inset ,  0  1px  0  #444 ;    }    .contenido {        overflow: hidden;    }    .dataTables_filter>label{        font-size: 1.2em;        color: #892a78;    }</style><script>    $(document).ready(function () {        var dataTable = $('#tableDTM').DataTable({            "processing": true,            "serverSide": true,            "order": [],            "ajax": {                url: "<?php echo base_url() . 'index.php/Reg_control/list_DTM';?>",                type: "POST"            },            "columnDefs": [                {                    "targets": [3,7,8],                    "orderable": false                }            ],            "retrieve": true,            "deferRender": true,            "crollCollapse": true,            "scroller": true,            "language": {                "sProcessing": "Procesando...",                "sLengthMenu": "Mostrar _MENU_ registros",                "sZeroRecords": "No se encontraron resultados",                "sEmptyTable": "Ningún dato disponible en esta tabla",                "sInfo": "Mostrando  _START_ al _END_ del total _TOTAL_",                "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",                "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",                "sInfoPostFix": "",                "sSearch": "Buscar:",                "sUrl": "",                "sInfoThousands": ",",                "sLoadingRecords": "Cargando...",                "oPaginate": {                    "sFirst": "Primero",                    "sLast": "Último",                    "sNext": ">>",                    "sPrevious": "<<"                },                "oAria": {                    "sSortAscending": ": Activar para ordenar la columna de manera ascendente",                    "sSortDescending": ": Activar para ordenar la columna de manera descendente"                }            },            "lengthMenu": [10, 20, 30, 100]        });        $('#dtm_monto').number( true, 2,',', '.' );        $('#e_dtm_monto').number( true, 2,',', '.' );        $('#reload').click(function () {            location.reload();        });        $('#upload').on('submit',function (e) {            e.preventDefault();            $(this).ajaxSubmit({                beforeSend:function () {                    $('#prog').show();                    $('#prog').attr('value','0');                    rowDTM()                },                uploadProgress:function (event,position,total,percentCompelete) {                    $('#prog').attr('value',percentCompelete);                    $('#percent').html(percentCompelete+'%');                },                success: function (data) {                    alertify.alert('SI-ARCH',data);                    window.setTimeout('location.reload()', 1000);                }            });        });    });    function deleteDTM(dtm_id)    {        $.ajax({            url: "<?php echo site_url('Reg_control/get_dtm/')?>" + dtm_id,            type: "GET",            dataType: "JSON",            success: function (data) {                alertify.confirm('SI-ARCH', '¿Eliminar <b>DTM '+data.dtm_nro+'</b>?', function(){                        $.ajax({                            url:  "<?php echo site_url('Reg_control/deleteDTM')?>",                            type: 'POST',                            data: {"dtm_id": dtm_id},                            success: function (respuesta) {                                alertify.alert('SI-ARCH',respuesta);                                window.setTimeout('location.reload()', 1000);                            },                            error: function (xhr, status) {                                alertify.error('Error al Eliminar');                            }                        });                        alertify.success('Ok')                    }                    , function(){                        alertify.error('Cancel')});            },            error: function (jqXHR, textStatus, errorThrown) {                alert('Error al obtener datos de ajax');            }        })    }    function editDTM(dtm_id)    {        $.ajax({            url: "<?php echo site_url('Reg_control/get_dtm/')?>" + dtm_id,            type: "GET",            dataType: "JSON",            success: function (data) {                var separador = "-";                var arrayFecha = data.dtm_fecha_ingreso.split(separador);                var anio = arrayFecha[0];                var mes = arrayFecha[1];                var dia = arrayFecha[2];                var dateNew = new Date(anio, mes-1 , dia);                $('#e_dtm_fecha_ingreso').attr('data-value',dateNew);                $('[name="e_dtm_nro"]').val(data.dtm_nro);                $('[name="e_dtm_gestion"]').val(data.dtm_gestion);                $('[name="e_dtm_nro_correlativo"]').val(data.dtm_correlativo);                $('[name="e_dtm_nro_fojas"]').val(data.dtm_nro_fojas);                $('[name="e_dtm_beneficiario"]').val(data.dtm_beneficiario);                $('[name="e_dtm_descripcion"]').val(data.dtm_descripcion);                $('[name="e_dtm_nro_con"]').val(data.dtm_nro_con);                var m = data.dtm_monto;                var res = m.replace(".", ",");                $('[name="e_dtm_monto"]').val(res);                $('[name="e_dtm_estante"]').val(data.dtm_estante);                $('[name="e_dtm_balda"]').val(data.dtm_balda);                $('[name="e_dtm_fila"]').val(data.dtm_fila);                $('[name="e_dtm_orden_tipo"]').val(data.dtm_orden_tipo);                $('[name="e_dtm_orden_cite"]').val(data.dtm_orden_cite);                $('[name="e_dtm_nro_cheque"]').val(data.dtm_nro_cheque);                $('[name="e_dtm_sisin"]').val(data.dtm_sisin);                $('[name="e_dtm_cuce"]').val(data.dtm_cuce);                $('[name="e_dtm_obj_gasto"]').val(data.dtm_obj_gasto);                $('[name="e_dtm_bd"]').val(data.dtm_bd);                $('[name="e_dtm_partida_pre"]').val(data.dtm_partida_pre);                $('[name="dtm_id"]').val(data.dtm_id);            },            error: function (jqXHR, textStatus, errorThrown) {                alert('Error al obtener datos de ajax');            }        });        Metro.dialog.open('#demoEdit');    }    function  uploadDTM(dtm_id, dtm_nro, dtm_gestion) {        var nFile = dtm_id+'_DTM-'+dtm_nro+'_'+dtm_gestion;        $('[name="nFile"]').val(nFile );        $('[name="dtm_id"]').val(dtm_id);        Metro.dialog.open('#demoUp');    }    function  rowDTM() {    }    function deletePdfDTM(dtm_id)    {        $.ajax({            url: "<?php echo site_url('Reg_control/get_dtm/')?>" + dtm_id,            type: "GET",            dataType: "JSON",            success: function (data) {                alertify.confirm('SI-ARCH', '¿Eliminar <b>el archivo '+ data.dtm_adjuntar +'</b>?', function(){                        $.ajax({                            url:  "<?php echo site_url('Reg_control/deletePdf_DTM')?>",                            type: 'POST',                            data: {"dtm_id": dtm_id, "dtm_adjuntar": data.dtm_adjuntar},                            success: function (respuesta) {                                alertify.alert('SI-ARCH',respuesta);                                window.setTimeout('location.reload()', 1000);                            },                            error: function (xhr, status) {                                alertify.error('Error al Eliminar archivo');                            }                        });                        alertify.success('Ok')                    }                    , function(){                        alertify.error('Cancel')});            },            error: function (jqXHR, textStatus, errorThrown) {                alert('Error al obtener datos de ajax');            }        })    }    function error() {        alertify            .alert("This is an alert dialog.", function(){                alertify.message('OK');            });    }    var texto ,padre;    $(".contenido").each(function () {            texto= $(this).html();            this.setAttribute("data-texto", texto);            if ($(this).html().length > 250){                $(this)                    .html(texto.substr(0,250)+"...")                    .append($("<label class='mas'>Ver más</label>"));            }        });    $(".mas").on("click", function () {        padre=$(this).parent();        texto=padre.data("texto");        $(padre)            .html(texto)            .css({                overflow: show            });    });</script></html>